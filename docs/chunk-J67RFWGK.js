import{a as N}from"./chunk-3VN4Z6TY.js";import{A as $,E as H,k as I,l as D,n as j,o as F,p as z,q as B,t as W,u as G,v as L,z as R}from"./chunk-MJME3ZUI.js";import"./chunk-IZYWPJE6.js";import"./chunk-QUJFQN2Y.js";import"./chunk-UPSG4ROG.js";import"./chunk-JB7YE2UN.js";import"./chunk-ZREP5C5K.js";import"./chunk-2PO6VATE.js";import"./chunk-7JAWQQGQ.js";import"./chunk-TYZ6ZTL7.js";import"./chunk-7FY2OE2O.js";import"./chunk-YXZ2TWS3.js";import"./chunk-IXRY6M2E.js";import"./chunk-OEU2GXHJ.js";import"./chunk-MTHZ7MWU.js";import"./chunk-WI5MSH4N.js";import"./chunk-DUUW6K7E.js";import"./chunk-CKP3SGE2.js";import"./chunk-E25QA4ES.js";import{C as d,D as t,E as n,F as m,M as f,U as S,V as x,W as i,X as M,Y as p,Z as b,ca as O,ea as h,ia as k,na as w,oa as T,r as a,t as u,v,va as E,z as P}from"./chunk-I3SMBZLJ.js";import"./chunk-IGVXFY24.js";import"./chunk-5TIAO6TV.js";import"./chunk-BANGDX2W.js";import"./chunk-FZQDFHAZ.js";import"./chunk-CLDSZD2A.js";import"./chunk-M2X7KQLB.js";import"./chunk-XTVTS2NW.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import"./chunk-JHI3MBHO.js";function q(c,r){if(c&1&&(t(0,"div",16)(1,"span",17),i(2),n(),t(3,"div",18)(4,"span",19),i(5),n()()()),c&2){let g=r.$implicit;a(2),M(g.label),a(),S("height",g.percentage,"%"),a(2),p("",g.hours,"h")}}function A(c,r){if(c&1&&(t(0,"div",20)(1,"span",21),i(2),n(),t(3,"span",22),i(4),n(),m(5,"ion-icon",23),n()),c&2){let g=r.$implicit;a(2),p("",g.minutes," min"),a(2),M(g.subject),a(),d("name",g.completed?"checkmark-circle-outline":"alert-circle-outline")("color",g.completed?"success":"warning")}}var et=(()=>{let r=class r{constructor(o,s){this.router=o,this.taskService=s,this.activeTab="stats",this.focusSessions=[],this.tasks=[],this.totalMinutes=0,this.todayMinutes=0,this.todayTarget=50,this.todayProgress=0,this.completedTasks=0,this.totalTasks=0,this.completionPercent=0,this.weekStats=[]}ngOnInit(){this.loadFocusSessions(),this.loadTasks()}navigate(o){this.activeTab=o,this.router.navigate(["/"+o])}loadFocusSessions(){this.taskService.getFocusSessions().subscribe({next:o=>{this.focusSessions=o,this.totalMinutes=o.reduce((e,l)=>e+l.minutes,0);let s=new Date().toDateString();this.todayMinutes=o.filter(e=>new Date(e.day||"").toDateString()===s).reduce((e,l)=>e+l.minutes,0),this.todayProgress=Math.min(this.todayMinutes/this.todayTarget,1),this.calculateWeekStats()},error:o=>console.error("Errore statistiche:",o)})}loadTasks(){this.taskService.getTasks().subscribe({next:o=>{this.tasks=o,this.totalTasks=o.length,this.completedTasks=o.filter(s=>s.completed).length,this.completionPercent=this.totalTasks?Math.round(this.completedTasks/this.totalTasks*100):0},error:o=>console.error("Errore caricamento tasks:",o)})}calculateWeekStats(){let o=["Dom","Lun","Mar","Mer","Gio","Ven","Sab"],s=new Date,e=new Date(s);e.setDate(s.getDate()-s.getDay()),this.weekStats=o.map((l,V)=>{let C=new Date(e);C.setDate(e.getDate()+V);let y=this.focusSessions.filter(_=>new Date(_.day||"").toDateString()===C.toDateString()).reduce((_,Y)=>_+Y.minutes,0);return{label:l,hours:+(y/60).toFixed(1),percentage:Math.min(y/60/3*100,100)}})}};r.\u0275fac=function(s){return new(s||r)(u(E),u(N))},r.\u0275cmp=v({type:r,selectors:[["app-stats"]],decls:65,vars:24,consts:[[1,"stats-page","ion-padding"],[1,"summary-boxes"],[1,"summary-box"],[1,"weekly-graph"],[1,"bars"],["class","bar-container",4,"ngFor","ngForOf"],[1,"daily-progress"],["color","success",3,"value"],[1,"focus-list"],["class","session-item",4,"ngFor","ngForOf"],[1,"tab",3,"click"],[1,"tab-content"],["src","assets/icon/calendario.jpeg",1,"logo-image"],["src","assets/icon/statistiche.jpeg",1,"logo-image"],["src","assets/icon/orologio.jpeg",1,"logo-image"],["src","assets/icon/profilo.jpeg",1,"logo-image"],[1,"bar-container"],[1,"bar-label"],[1,"bar"],[1,"bar-value"],[1,"session-item"],[1,"session-time"],[1,"session-subject"],[3,"name","color"]],template:function(s,e){s&1&&(t(0,"ion-header")(1,"ion-toolbar")(2,"ion-title")(3,"b"),i(4,"Statistiche"),n()()()(),t(5,"ion-content",0)(6,"div",1)(7,"div",2)(8,"h2"),i(9,"Totale settimanale"),n(),t(10,"p"),i(11),O(12,"number"),n()(),t(13,"div",2)(14,"h2"),i(15,"Media giornaliera"),n(),t(16,"p"),i(17),O(18,"number"),n()(),t(19,"div",2)(20,"h2"),i(21,"Task completate"),n(),t(22,"p"),i(23),n(),t(24,"small"),i(25),n()()(),t(26,"div",3)(27,"h2"),i(28,"Ore per giorno"),n(),t(29,"div",4),P(30,q,6,4,"div",5),n()(),t(31,"div",6)(32,"h2"),i(33,"Progresso odierno"),n(),m(34,"ion-progress-bar",7),t(35,"p"),i(36),n()(),t(37,"div",8)(38,"h2"),i(39,"Sessioni Focus completate"),n(),P(40,A,6,4,"div",9),n()(),t(41,"ion-footer")(42,"ion-toolbar")(43,"ion-grid")(44,"ion-row")(45,"ion-col",10),f("click",function(){return e.navigate("planner")}),t(46,"div",11),m(47,"img",12),t(48,"ion-label"),i(49,"Planner"),n()()(),t(50,"ion-col",10),f("click",function(){return e.navigate("stats")}),t(51,"div",11),m(52,"img",13),t(53,"ion-label"),i(54,"Statistiche"),n()()(),t(55,"ion-col",10),f("click",function(){return e.navigate("focus")}),t(56,"div",11),m(57,"img",14),t(58,"ion-label"),i(59,"Focus"),n()()(),t(60,"ion-col",10),f("click",function(){return e.navigate("profile")}),t(61,"div",11),m(62,"img",15),t(63,"ion-label"),i(64,"Profilo"),n()()()()()()()),s&2&&(a(11),p("",h(12,18,e.totalMinutes/60,"1.0-1"),"h"),a(6),p("",h(18,21,e.totalMinutes/7/60,"1.0-1"),"h"),a(6),b("",e.completedTasks," / ",e.totalTasks),a(2),p("",e.completionPercent,"%"),a(5),d("ngForOf",e.weekStats),a(4),d("value",e.todayProgress),a(2),b("",e.todayMinutes," / ",e.todayTarget," min"),a(4),d("ngForOf",e.focusSessions),a(5),x("active",e.activeTab==="planner"),a(5),x("active",e.activeTab==="stats"),a(5),x("active",e.activeTab==="focus"),a(5),x("active",e.activeTab==="profile"))},dependencies:[H,I,D,j,F,z,B,W,G,L,R,$,T,k,w],styles:["[_nghost-%COMP%]{--ion-background-color: #f4f3f1;--ion-text-color: #344c3d}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--background: #f2d1d4;color:#344c3d}ion-header[_ngcontent-%COMP%]   ion-title[_ngcontent-%COMP%]{color:#344c3d;font-family:var(--font-pixel);font-size:25px;text-align:center}.stats-page[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:24px;padding-bottom:16px}.stats-page[_ngcontent-%COMP%]   .summary-boxes[_ngcontent-%COMP%]{display:flex;gap:16px;justify-content:center}.stats-page[_ngcontent-%COMP%]   .summary-boxes[_ngcontent-%COMP%]   .summary-box[_ngcontent-%COMP%]{flex:1;max-width:140px;background:#fff;border-radius:16px;text-align:center;padding:16px;box-shadow:0 8px 20px #0000000f;font-family:var(--font-pixel)}.stats-page[_ngcontent-%COMP%]   .summary-boxes[_ngcontent-%COMP%]   .summary-box[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:14px;margin-bottom:8px}.stats-page[_ngcontent-%COMP%]   .summary-boxes[_ngcontent-%COMP%]   .summary-box[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:20px;font-weight:700}.stats-page[_ngcontent-%COMP%]   .weekly-graph[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-family:var(--font-pixel);margin-bottom:12px;text-align:center}.stats-page[_ngcontent-%COMP%]   .weekly-graph[_ngcontent-%COMP%]   .bars[_ngcontent-%COMP%]{display:flex;justify-content:space-around;align-items:flex-end;height:160px}.stats-page[_ngcontent-%COMP%]   .weekly-graph[_ngcontent-%COMP%]   .bars[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.stats-page[_ngcontent-%COMP%]   .weekly-graph[_ngcontent-%COMP%]   .bars[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-label[_ngcontent-%COMP%]{font-size:12px;margin-bottom:4px}.stats-page[_ngcontent-%COMP%]   .weekly-graph[_ngcontent-%COMP%]   .bars[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{width:24px;background:#344c3d;border-radius:6px 6px 0 0;display:flex;justify-content:center;align-items:flex-end;transition:all .4s ease-in-out}.stats-page[_ngcontent-%COMP%]   .weekly-graph[_ngcontent-%COMP%]   .bars[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]:hover{transform:scaleY(1.05);opacity:.85}.stats-page[_ngcontent-%COMP%]   .weekly-graph[_ngcontent-%COMP%]   .bars[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]   .bar-value[_ngcontent-%COMP%]{font-size:10px;color:#fff;margin-bottom:2px}.stats-page[_ngcontent-%COMP%]   .daily-progress[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-family:var(--font-pixel);margin-bottom:8px;text-align:center}.stats-page[_ngcontent-%COMP%]   .daily-progress[_ngcontent-%COMP%]   ion-progress-bar[_ngcontent-%COMP%]{height:14px;border-radius:12px;margin-bottom:6px;transition:width .4s ease-in-out}.stats-page[_ngcontent-%COMP%]   .daily-progress[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:right;font-size:12px;margin:0;font-family:var(--font-pixel)}.stats-page[_ngcontent-%COMP%]   .focus-list[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-family:var(--font-pixel);margin-bottom:12px;text-align:center}.stats-page[_ngcontent-%COMP%]   .focus-list[_ngcontent-%COMP%]   .session-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;background:#fff;border-radius:14px;padding:8px 12px;margin-bottom:8px;font-family:var(--font-pixel);box-shadow:0 6px 15px #0000000d}.stats-page[_ngcontent-%COMP%]   .focus-list[_ngcontent-%COMP%]   .session-time[_ngcontent-%COMP%]{font-weight:700}.stats-page[_ngcontent-%COMP%]   .focus-list[_ngcontent-%COMP%]   .session-subject[_ngcontent-%COMP%]{flex:1;text-align:center}ion-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--background: #fdf7f2;border-top:1px solid #ccc}.tab[_ngcontent-%COMP%]{font-family:var(--font-pixel);letter-spacing:1px;text-align:center;color:#666;font-size:12px}.tab.active[_ngcontent-%COMP%]{color:#344c3d;font-weight:700}.tab-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}.logo-image[_ngcontent-%COMP%]{width:35px;height:auto;margin-bottom:8px}.tab[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:24px;margin-bottom:4px;color:#344c3d}@media (max-width: 360px){.summary-boxes[_ngcontent-%COMP%]{flex-direction:column;gap:12px}.bars[_ngcontent-%COMP%]{height:120px}}.summary-boxes[_ngcontent-%COMP%]{display:flex;gap:16px;justify-content:center}.summary-boxes[_ngcontent-%COMP%]   .summary-box[_ngcontent-%COMP%]{flex:1;max-width:140px;background:#fff;border-radius:16px;text-align:center;padding:16px;box-shadow:0 8px 20px #0000000f;font-family:var(--font-pixel)}.summary-boxes[_ngcontent-%COMP%]   .summary-box[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:14px;margin-bottom:8px}.summary-boxes[_ngcontent-%COMP%]   .summary-box[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:20px;font-weight:700}.summary-boxes[_ngcontent-%COMP%]   .summary-box[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{display:block;font-size:12px;color:#829672;margin-top:2px}"]});let c=r;return c})();export{et as StatsPage};
